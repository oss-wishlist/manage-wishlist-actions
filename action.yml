name: 'Manage Wishlist Actions'
description: 'Automates wishlist tasks: adds/updates FUNDING.yml via PRs, refreshes cache, and tracks idempotently'
author: 'oss-wishlist'

inputs:
  github-token:
    description: 'GitHub token (PAT from bot account or personal account) with public_repo scope'
    required: true
  database-url:
    description: 'PostgreSQL connection string for wishlists database'
    required: true
  wishlist-id:
    description: 'ID of the wishlist to process (GitHub issue number from old system)'
    required: true
  cache-url:
    description: 'URL to refresh wishlist cache (optional)'
    required: false
    default: 'https://urchin-app-bozjb.ondigitalocean.app/api/wishlists?refresh=true'

outputs:
  pr-url:
    description: 'URL of the created or updated PR'
  status:
    description: 'Status of the action (success, skipped, error)'

runs:
  using: 'node20'
  main: 'dist/index.js'

branding:
  icon: 'heart'
  color: 'purple'
